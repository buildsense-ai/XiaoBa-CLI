{
  "tools": [
    {
      "name": "search_papers",
      "description": "搜索学术论文，支持 arXiv、Google Scholar、Semantic Scholar 等数据源",
      "script": "tools/python/search_tool.py",
      "timeout": 30000,
      "parameters": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "搜索关键词"
          },
          "source": {
            "type": "string",
            "description": "数据源",
            "enum": ["arxiv", "scholar", "semantic_scholar"],
            "default": "arxiv"
          },
          "limit": {
            "type": "number",
            "description": "返回结果数量",
            "default": 10
          },
          "year_from": {
            "type": "number",
            "description": "起始年份（可选）"
          }
        },
        "required": ["query"]
      }
    },
    {
      "name": "paper_parser",
      "description": "解析 SCI 论文 PDF，提取章节内容和元数据",
      "script": "tools/python/paper_parser_tool.py",
      "timeout": 60000,
      "parameters": {
        "type": "object",
        "properties": {
          "pdf_path": {
            "type": "string",
            "description": "PDF 文件路径"
          },
          "extract_sections": {
            "type": "boolean",
            "description": "是否提取章节内容",
            "default": true
          },
          "extract_metadata": {
            "type": "boolean",
            "description": "是否提取元数据（标题、作者）",
            "default": true
          }
        },
        "required": ["pdf_path"]
      }
    },
    {
      "name": "markdown_chunker",
      "description": "将 MinerU 输出的 full.md 解析为按章节聚合的顺序块（文本/图片/表格/小节标题），用于“像人一样”顺序精读",
      "script": "tools/python/markdown_chunker_tool.py",
      "timeout": 30000,
      "parameters": {
        "type": "object",
        "properties": {
          "full_md_path": {
            "type": "string",
            "description": "MinerU 输出 full.md 的路径（绝对或相对路径）"
          },
          "chapter_level": {
            "type": "number",
            "description": "章节层级（默认 1 表示按 1./2./3. 这种一级编号聚合）",
            "default": 1
          },
          "include_heading_blocks": {
            "type": "boolean",
            "description": "是否把章节内的 2.1/2.2 等小节标题作为 heading 块输出",
            "default": true
          },
          "resolve_images": {
            "type": "boolean",
            "description": "是否输出图片的 resolved_path（可直接用于 read_media）",
            "default": true
          },
          "max_text_block_chars": {
            "type": "number",
            "description": "文本块最大字符数（用于切分超长段落，避免一次输入过长）",
            "default": 1200
          },
          "skip_first_heading": {
            "type": "boolean",
            "description": "是否跳过第一个一级标题作为论文标题（通常是论文标题，不算章节）",
            "default": true
          },
          "keep_empty_chapters": {
            "type": "boolean",
            "description": "是否保留空章节（通常不需要；默认保留以便调试）",
            "default": true
          },
          "outline_only": {
            "type": "boolean",
            "description": "是否只返回章节大纲与统计信息（不返回 blocks），用于先获取目录再按章拉取 blocks",
            "default": false
          },
          "chapter_selector": {
            "type": "string",
            "description": "可选：只返回某一章（支持 '2' / '2.' / 'Study Area' 等）"
          }
        },
        "required": ["full_md_path"]
      }
    },
    {
      "name": "pdf_splitter",
      "description": "将 PDF 按章节分割成多个 Markdown 文件",
      "script": "tools/python/pdf_splitter_tool.py",
      "timeout": 60000,
      "parameters": {
        "type": "object",
        "properties": {
          "pdf_path": {
            "type": "string",
            "description": "PDF 文件路径"
          },
          "output_dir": {
            "type": "string",
            "description": "输出目录路径（可选，默认为 output_<pdf文件名>）"
          }
        },
        "required": ["pdf_path"]
      }
    },
    {
      "name": "analyze_image",
      "description": "读取图片并调用多模态模型分析，只返回文字结果（base64 不进入对话历史，节省上下文空间）",
      "script": "tools/python/analyze_image_tool.py",
      "timeout": 90000,
      "parameters": {
        "type": "object",
        "properties": {
          "file_path": {
            "type": "string",
            "description": "图片文件路径（绝对或相对路径）"
          },
          "prompt": {
            "type": "string",
            "description": "基于上下文的具体分析问题"
          },
          "detail": {
            "type": "string",
            "enum": ["auto", "low", "high"],
            "description": "图像细节级别（可选）",
            "default": "auto"
          },
          "max_tokens": {
            "type": "number",
            "description": "最大输出 token 数（可选）",
            "default": 2048
          },
          "system": {
            "type": "string",
            "description": "系统提示词（可选）"
          }
        },
        "required": ["file_path", "prompt"]
      }
    },
    {
      "name": "self_evolution",
      "description": "自我进化工具 - 允许 XiaoBa 创建新的工具和技能来扩展自己的能力",
      "script": "tools/python/self_evolution_tool.py",
      "timeout": 30000,
      "parameters": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "description": "操作类型",
            "enum": ["create_tool", "create_skill"]
          },
          "name": {
            "type": "string",
            "description": "工具或技能的名称（只允许字母、数字、下划线、连字符）"
          },
          "description": {
            "type": "string",
            "description": "工具或技能的描述"
          },
          "code": {
            "type": "string",
            "description": "Python代码（仅用于create_tool）"
          },
          "parameters": {
            "type": "object",
            "description": "参数定义（仅用于create_tool）"
          },
          "prompt": {
            "type": "string",
            "description": "Skill的prompt内容（仅用于create_skill）"
          },
          "timeout": {
            "type": "number",
            "description": "超时时间（可选，默认30000ms）",
            "default": 30000
          }
        },
        "required": ["action", "name", "description"]
      }
    }
  ],
  "settings": {
    "python_executable": "python",
    "max_buffer_size": 10485760,
    "default_timeout": 30000,
    "encoding": "utf-8"
  }
}
